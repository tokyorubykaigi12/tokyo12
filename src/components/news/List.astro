---
import { getCollection } from 'astro:content';

import Panel from '../Layouts/Panel.astro';
import NewsTemplate from './Template.astro';

const newsEntries = await getCollection('news');
---

<Panel title="News">
  {
    Promise.all(newsEntries.map(async (entry) => {
      const { Content } = await entry.render();
      return (
        <NewsTemplate date={entry.data.date}>
          <Content />
        </NewsTemplate>
      );
    }))
  }
</Panel>
